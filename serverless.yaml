service: simorgh-serverless
useDotenv: true

provider:
  name: aws
  runtime: nodejs16.x

custom:
  webpack:
    webpackConfig: "webpack.config.js"
    packager: "yarn"
    includeModules: true
  serverless-offline:
    useChildProcesses: true
    httpPort: 7080

package:
  individually: true

plugins:
  - serverless-webpack
  - serverless-offline

functions:
  simorgh-serverless-app:
    handler: src/index.handler
    events:
      - httpApi:
          path: "/{proxy+}"
          method: "*"
